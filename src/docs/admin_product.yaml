tags:
  - name: Admin/Product
    description: 관리자 상품 관리 (JSON 기반, 이미지는 URL 사용)

components:
  schemas:
    # ----------------------------------------------------------------
    # [Input] 상품 사이즈
    # ----------------------------------------------------------------
    ProductSizeInput:
      type: object
      required:
        - size
        - stock
      properties:
        size:
          type: string
          example: "270"
        stock:
          type: integer
          example: 100

    # ----------------------------------------------------------------
    # [Input] 상품 색상 (이미지 포함)
    # ----------------------------------------------------------------
    ProductColorInput:
      type: object
      required:
        - productCode
        - colorName
        - images
        - sizes
      properties:
        productCode:
          type: string
          description: 색상별 상품 고유 코드
          example: "PW0UW25F303"
        colorName:
          type: string
          example: "WHITE"
        hexCode:
          type: string
          example: "#FFFFFF"
        colorInfo:
          type: string
          example: "화이트 컬러 / 매쉬 소재"
        images:
          type: array
          description: "업로드 API를 통해 받은 이미지 URL 리스트"
          items:
            type: string
            format: uri
            example: "https://storage.googleapis.com/.../img1.jpg"
        sizes:
          type: array
          items:
            $ref: '#/components/schemas/ProductSizeInput'

    # ----------------------------------------------------------------
    # [Input] 상품 전체 입력 (Style, Gender 추가됨)
    # ----------------------------------------------------------------
    ProductInput:
      type: object
      required:
        - name
        - description
        - price
        - categoryId
        - style
        - gender
        - colors
      properties:
        name: { type: string }
        description: { type: string }
        summary: { type: string }
        price: { type: integer }
        categoryId: { type: integer }

        # [신규] 필터 속성
        style:
          type: string
          enum: [ RACING, LIGHTWEIGHT_RACING, STABILITY, CUSHION, TRAIL_RUNNING, LONG_PANTS, LONG_SLEEVE, DOWN, DOWN_VEST, LEGGINGS, SLEEVELESS, SHORT_PANTS, SHORT_SLEEVE, VEST, UNDERWEAR_TOP, JACKET, ZIPUP_LONG, TRAINING_TOP, TRAINING_BOTTOM, HOODIE, UNIFORM, BASEBALL_SHOE, AUTHENTIC_CAP ]
          example: "RACING"
        gender:
          type: string
          enum: [ MALE, FEMALE, COMMON ]
          example: "COMMON"

        # 메타 정보
        material: { type: string, example: "폴리에스터 100%" }
        manufacturer: { type: string, example: "(주)LS네트웍스" }
        originCountry: { type: string, example: "베트남" }
        careInstructions:
          type: string
          example: "손세탁 권장, 표백제 사용 금지"
        manufactureDate:
          type: string
          example: "2023.10"
        qualityAssurance:
          type: string
          example: "관련 법 및 소비자 분쟁해결 기준에 따름"
        asPhone:
          type: string
          example: "080-023-1020"

        isNew: { type: boolean }
        isBest: { type: boolean }
        colors:
          type: array
          items:
            $ref: '#/components/schemas/ProductColorInput'

paths:
  /api/admin/products:
    get:
      summary: 상품 목록 조회
      tags: [Admin/Product]
      security:
        - bearerAuth: []
        - apiKeyAuth: []
      parameters:
        - in: query
          name: categoryId
          schema:
            type: integer

        # [신규] styles 배열 파라미터
        - in: query
          name: styles
          style: form
          explode: true
          schema:
            type: array
            items:
              type: string
              enum: [ RACING, LIGHTWEIGHT_RACING, STABILITY, CUSHION, TRAIL_RUNNING, LONG_PANTS, LONG_SLEEVE, DOWN, DOWN_VEST, LEGGINGS, SLEEVELESS, SHORT_PANTS, SHORT_SLEEVE, VEST, UNDERWEAR_TOP, JACKET, ZIPUP_LONG, TRAINING_TOP, TRAINING_BOTTOM, HOODIE, UNIFORM, BASEBALL_SHOE, AUTHENTIC_CAP ]

        # [신규] genders 배열 파라미터
        - in: query
          name: genders
          style: form
          explode: true
          schema:
            type: array
            items:
              type: string
              enum: [ MALE, FEMALE, COMMON ]

        # [신규] sizes 배열 파라미터
        - in: query
          name: sizes
          style: form
          explode: true
          schema:
            type: array
            items:
              type: string
      responses:
        200:
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  products:
                    type: array
                    items:
                      type: object
                  meta:
                    type: object
                    properties:
                      total: { type: integer }
                      page: { type: integer }
                      lastPage: { type: integer }

    post:
      summary: 상품 등록
      tags: [Admin/Product]
      description: 상품 정보와 필터 속성(style, gender)을 포함하여 등록합니다.
      security:
        - bearerAuth: []
        - apiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductInput'
      responses:
        201:
          description: 등록 성공
        409:
          description: 중복된 상품 코드

  /api/admin/products/{id}:
    get:
      summary: 상품 상세 조회
      tags: [Admin/Product]
      security:
        - bearerAuth: []
        - apiKeyAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      responses:
        200:
          description: 성공

    put:
      summary: 상품 수정
      tags: [Admin/Product]
      description: 상품 정보를 수정합니다. (style, gender 포함)
      security:
        - bearerAuth: []
        - apiKeyAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductInput'
      responses:
        200:
          description: 수정 성공

    delete:
      summary: 상품 삭제
      tags: [Admin/Product]
      security:
        - bearerAuth: []
        - apiKeyAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      responses:
        200:
          description: 삭제 성공